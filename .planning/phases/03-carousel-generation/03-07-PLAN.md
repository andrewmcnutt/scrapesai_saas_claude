---
phase: 03-carousel-generation
plan: 07
type: execute
wave: 5
depends_on: ["03-03", "03-04", "03-05", "03-06"]
files_modified: []
autonomous: false
requirements: [GEN-01, GEN-02, GEN-03, GEN-04, GEN-05, GEN-06, GEN-07, GEN-08, GEN-09, GEN-10, GEN-11, GEN-12, GEN-13, GEN-14, GEN-15, HIST-01, HIST-02, HIST-03, HIST-04, HIST-05, HIST-06, N8N-01, N8N-02, N8N-03, N8N-04, N8N-05, N8N-06, N8N-07, N8N-08, N8N-09, N8N-10, UI-05]

must_haves:
  truths:
    - "All generation UI components render correctly"
    - "Wizard validates each step before progression"
    - "Sidebar navigation shows Generate and History links"
    - "Application builds without errors"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete carousel generation feature: wizard form, slide viewer, history page, navigation, and build health.

Purpose: Before marking Phase 3 complete, verify all UI components render correctly, wizard flow works end-to-end, and the application builds without errors. N8N integration cannot be fully tested without a running N8N instance, but all code paths can be verified via build and visual inspection.

Output: Human-verified carousel generation feature ready for N8N integration testing.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run production build and fix any issues</name>
  <files></files>
  <action>
1. Run `npx next build` to verify the full application builds without errors.
2. If there are TypeScript errors, lint errors, or build failures, fix them.
3. Common issues to watch for:
   - Missing imports (Swiper CSS, JSZip types)
   - Unused variables (eslint)
   - Type mismatches between components
   - Dynamic imports needed for Swiper (client-only library)
4. Re-run build until it passes clean.
  </action>
  <verify>
- `npx next build` completes successfully with no errors
  </verify>
  <done>
- Production build passes without errors
- All TypeScript types resolve correctly
- No lint violations in new files
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verification of complete carousel generation feature</name>
  <files></files>
  <action>
Verify the complete carousel generation feature built across Plans 01-06:
1. Generation wizard at /generate with 3 steps (Idea, Template, Style)
2. Carousel viewer at /carousel/[id] with slide navigation, thumbnail strip, post body text, download ZIP, and regenerate
3. History page at /history with paginated carousel cards
4. Dashboard updated with Generate CTA and sidebar navigation
5. Backend APIs: generation server action, N8N callback webhook (HMAC secured), status polling endpoint
6. Database: carousels table with RLS, indexes, and timeout refund function
  </action>
  <verify>
1. Start dev server: `npm run dev`
2. Log in and navigate to Dashboard
3. Verify sidebar shows: Dashboard, Generate, History, Brand Settings
4. Click "Generate" in sidebar or dashboard CTA
5. Verify wizard shows Step 1: Idea (topic, key points, tone fields)
6. Fill in idea fields, click Next
7. Verify Step 2: Template grid shows 5-6 options with selection highlighting
8. Select a template, click Next
9. Verify Step 3: Style cards show 4 presets plus Custom option
10. Select Custom and verify text input appears
11. Click Generate (will fail with N8N error, but button should debounce and show loading state)
12. Navigate to /history - should show empty state or any test carousels
13. Verify pagination component renders at bottom of history page
14. Check that application build passes: `npx next build`

Note: Full end-to-end generation cannot be tested without a running N8N instance. The N8N webhook call will fail, but all UI components, validation, and code paths can be verified.
  </verify>
  <done>Human confirms all UI components render correctly and wizard flow works through all 3 steps. Type "approved" to confirm Phase 3 is complete, or describe any issues found.</done>
</task>

</tasks>

<verification>
1. `npx next build` passes
2. All pages render: /generate, /carousel/[id], /history
3. Wizard validates each step
4. Sidebar navigation includes all 4 links
5. Dashboard has generation CTA
</verification>

<success_criteria>
- Production build passes with zero errors
- Human confirms all UI components render correctly
- Wizard flow works through all 3 steps
- Phase 3 approved for completion
</success_criteria>

<output>
After completion, create `.planning/phases/03-carousel-generation/03-07-SUMMARY.md`
</output>
